name: Vocabulary Card - Edit

on:
  issues:
    types:
      - edited

jobs:
  pipeline:
    if: contains(github.event.issue.labels.*.name, 'generate')
    uses: ./.github/workflows/_vocab_pipeline.yml
    with:
      mode: edit
      issue_payload: ${{ toJson(github.event) }}
      python_version: "3.12"
      run_tests: false
      post_comment_structured: true
      post_comment_legibility: true
      auto_approve: true
      auto_merge: true
    secrets:
      DASHSCOPE_API_KEY: ${{ secrets.DASHSCOPE_API_KEY }}
      GPG_PRIVATE_KEY: ${{ secrets.GPG_PRIVATE_KEY }}
      GPG_PASSPHRASE: ${{ secrets.GPG_PASSPHRASE }}
      SIGNING_NAME: ${{ secrets.SIGNING_NAME }}
      SIGNING_EMAIL: ${{ secrets.SIGNING_EMAIL }}
      APPROVER_TOKEN: ${{ secrets.APPROVER_TOKEN }}
      GH_TOKEN: ${{ secrets.WORKFLOW_GH_TOKEN }}
